{% extends "base.html" %}
{% load static %}

{% block title %}{{ project.title }}{% endblock %}
{% block body_class %}project-page{% endblock %}

{% block content %}
<div class="container py-5">

    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li class="breadcrumb-item"><a href="{% url 'projects:list' %}">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ project.title }}</li>
        </ol>
    </nav>
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
<div class="mb-3">
    <a href="{% url 'projects:list' %}" class="btn btn-project btn-back">
        ‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
    </a>
</div>
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="mb-4 project-header">
        <h1 class="fw-bold">{{ project.title }}</h1>
        <span class="category-badge">{{ project.category.title }}</span>
    </div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
    {% if project.main_image %}
    <div class="project-main-image mb-5">
        <img src="{{ project.main_image.url }}" class="img-fluid w-100" alt="{{ project.title }}">
    </div>
    {% endif %}

    <div class="row g-5">

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="col-lg-8">

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="project-content">
                {{ project.full_description|safe }}
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="d-flex flex-wrap gap-3 mt-5">
                {% if project.attachment %}
                <a href="{{ project.attachment.url }}" class="btn btn-project" target="_blank">
                    üìÑ –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
                </a>
                {% endif %}
                {% if project.external_link %}
                <a href="{{ project.external_link }}" class="btn btn-project" target="_blank">
                    üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                </a>
                {% endif %}
                {% if project.gallery_link %}
                <a href="{{ project.gallery_link }}" class="btn btn-project" target="_blank">
                    üì∏ –§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è
                </a>
                {% endif %}
            </div>

        </div>

        <!-- –ë–æ–∫–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="col-lg-4">
            <div class="project-sidebar p-4 rounded shadow-sm">
                <h5 class="fw-semibold mb-3">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ</h5>

                {% if project.start_date %}
                <div class="mb-2">
                    <strong>–î–∞—Ç—ã:</strong><br>
                    {% if project.end_date %}
                        {{ project.start_date|date:"d.m.Y" }} ‚Äî {{ project.end_date|date:"d.m.Y" }}
                    {% else %}
                        —Å {{ project.start_date|date:"d.m.Y" }}
                    {% endif %}
                </div>
                {% endif %}

                {% if project.location %}
                <div class="mb-2">
                    <strong>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:</strong><br>{{ project.location }}
                </div>
                {% endif %}

                {% if project.prize_fund %}
                <div class="mb-2">
                    <strong>–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥:</strong><br>{{ project.prize_fund }}
                </div>
                {% endif %}

                {% if project.contacts %}
                <div class="mb-2">
                    <strong>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</strong><br>{{ project.contacts|linebreaks }}
                </div>
                {% endif %}
            </div>
        </div>

    </div>

    <!-- –ü–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–µ–∫—Ç—ã -->
    {% if related_projects %}
    <div class="related-projects mt-5">
        <h3 class="fw-bold mb-4">–ü–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h3>
        <div class="row g-4">
            {% for rp in related_projects %}
            <div class="col-lg-4 col-md-6">
                <div class="card h-100 project-card">

                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                    <div class="ratio ratio-16x9 project-main-image">
                        <img src="{{ rp.main_image.url }}" class="card-img-top object-fit-cover" alt="{{ rp.title }}">
                    </div>

                    <div class="card-body d-flex flex-column">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                        <div class="mb-2">
                            <span class="badge">{{ rp.category.title }}</span>
                        </div>

                        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                        <h5 class="card-title fw-semibold">{{ rp.title }}</h5>

                        <!-- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                        <p class="card-text text-muted small mb-4">
                            {{ rp.short_description|truncatechars:100 }}
                        </p>

                        <!-- –ö–Ω–æ–ø–∫–∞ -->
                        <div class="mt-auto">
                            <a href="{{ rp.get_absolute_url }}" class="btn btn-project w-100">
                                –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

</div>

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/project.css' %}">
{% endblock %}

{% endblock %}
